# Промт-патч v1.2: Панель администрирования роботов PUDU в iikoWeb

---
**Версия**: 1.2
**Дата**: 2026-02-13
**Автор**: Кирилл Тюрин (системный аналитик)
**Статус**: [PENDING]
**Артефакт**: Д3-патч (Промт-патч для обновления прототипа iikoWeb)
**Базовый документ**: Промт_прототипа_PUDU_Admin_панели.md (v1.1, 2026-02-11)
**Источники**: Встреча с NE 11.02.2026; Документ «IIKO web.docx» от NE; План обновления (2026-02-13)
**Замечания**: З-01, З-02, З-03, З-05, З-06, З-07, З-08, З-09, З-10, З-12, З-13, З-14, З-15, З-16, З-17, З-18, З-19, З-20, З-21, З-22, З-23, З-24 (примечание), З-25, З-26 (примечание), З-27, З-31, З-32, З-43, З-44, З-45, З-46, З-48
---

## Назначение

Этот документ — **дельта-патч** к промту v1.1. Он описывает **только изменения**, которые необходимо внести в прототип Admin Panel по результатам встречи с NE (11.02.2026) и документа «IIKO web» от заказчика.

**Инструкция по применению**: открой базовый промт `Промт_прототипа_PUDU_Admin_панели.md` (v1.1) и примени все изменения ниже последовательно. Каждый раздел указывает, что **удалить**, что **добавить** и что **изменить**.

---

## C1. Экран Э2 — Регистрация робота: упрощение формы

> **Замечания**: З-01, З-02, З-03
> **Источник**: Олег (NE, встреча 11.02): «Регион в целом не прям нужен. Это по факту тоже параметр для нас»; «Чувствительных данных нет. Зачем это просто этому человеку?»; «Мы можем вам пересылать из системы имя этого робота»

### УДАЛИТЬ из Э2

1. **Поле #1 «Регион сервера»** (Select EU/ASIA) — удалить полностью. Регион — внутренний параметр NE, клиент его не вводит.
2. **Поле #4 «Секретный ключ»** (Input password) — удалить полностью. Аутентификация переходит на JWT (`client_id` + `api_secret`), секретный ключ робота — сущность NE.

### ИЗМЕНИТЬ в Э2

Форма регистрации сокращается до **2 полей**:

| #   | Label      | Контрол      | Обязательное | Placeholder             | Подсказка (text-xs text-gray-400)                                                                                         | Валидация                             |
| --- | ---------- | ------------ | ------------ | ----------------------- | ------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- |
| 1   | ID робота  | Input (text) | Да           | «Серийный номер PUDU»   | «Серийный номер робота из системы PUDU»                                                                                   | Формат серийного номера, уникальность |
| 2   | Имя робота | Input (text) | Нет          | «Например: BellaBot-01» | «Имя робота для идентификации. Загружается автоматически из системы NE при регистрации. Можно изменить при необходимости» | max 64 символа                        |

**Поведение поля «Имя робота»:**
- При вводе ID робота и успешном подключении к NE — поле «Имя робота» **автозаполняется** стандартным именем из системы NE (например, «BellaBot»).
- Пользователь **может** изменить имя на произвольное для удобства идентификации.
- Поле **не обязательное**: если пользователь не ввёл имя, используется имя от NE.

**Footer модалки (без изменений):**
- Слева: **«Отмена»** (ghost)
- Справа: **«Зарегистрировать»** (primary, disabled когда ID не заполнен)

**Обновить состояния формы:**

| Состояние             | UI                                                                                                                                     |
| --------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| **Начальное**         | Поля пусты. Кнопка «Зарегистрировать» — `disabled`                                                                                     |
| **Заполнение**        | Кнопка active когда ID заполнен. Валидация в реальном времени                                                                          |
| **Отправка**          | Кнопка → loading (спиннер). Все поля — `disabled`. Имя автозаполняется при успешном подключении                                        |
| **Успех**             | Toast: **«Робот успешно зарегистрирован»** (3 сек). Модалка закрывается. Таблица обновляется                                           |
| **Ошибка: не найден** | Alert (**destructive**) под полями: **«Робот не найден в системе PUDU. Обратитесь к специалистам NE для добавления робота в магазин»** |
| **Ошибка: дубликат**  | Alert: **«Робот с таким ID уже зарегистрирован»**. Поле ID: `border-red-500`                                                           |
| **Ошибка: сеть**      | Alert: **«Не удалось подключиться к серверу. Проверьте соединение»**                                                                   |

**Интерактивность прототипа:**
- При вводе ID = `PD000ERROR` → имитация ошибки «не найден»
- При вводе ID = `PD2024060001` (уже есть) → имитация ошибки «дубликат»
- Любой другой ID → успешная регистрация. Если поле «Имя» пустое — автозаполнить «BellaBot» (имитация ответа NE)
- Имитация задержки 1.5 сек при отправке

---

## C2. Экран Э1 — Таблица роботов: убрать «Регион», добавить `after_action`, ошибка «не в системе»

> **Замечания**: З-01, З-05, З-32, З-43
> **Источник**: Документ «IIKO web»: «Убрать "Действия после выполнения" — сделаем данную настройку для каждого робота отдельно»; Олег (встреча 11.02): обработка ошибки «робот не в системе PUDU»

### УДАЛИТЬ из Э1

1. **Столбец #3 «Регион»** — удалить из таблицы.

### ДОБАВИТЬ в Э1

1. **Столбец «Действие после задачи»** — новый столбец в таблице, отображает per-robot настройку `after_action`.
2. **Обработка ошибки «робот не в системе»** (З-05): если после регистрации NE возвращает ошибку «робот работает, но не добавлен в магазин NE» — в таблице Э1 робот **не добавляется**. Ошибка отображается на уровне формы регистрации (Э2, см. C1 — состояние «Ошибка: не найден»). В таблице Э1 могут появляться только успешно зарегистрированные роботы.

**Обновлённая таблица Э1:**

| #   | Столбец               | Тип данных      | Стилизация                                           |
| --- | --------------------- | --------------- | ---------------------------------------------------- |
| 1   | Имя робота            | string          | Обычный текст `text-sm text-gray-900`                |
| 2   | ID робота             | string          | `font-mono text-sm text-gray-600`                    |
| 3   | Статус                | Badge           | online / offline / error (без изменений)             |
| 4   | Активная карта        | string          | `text-sm text-gray-700`                              |
| 5   | Действие после задачи | Select (inline) | Select: «Режим ожидания» / «Маркетинг»               |
| 6   | Действия              | Кнопка          | «Удалить» (ghost, danger, иконка `trash-2`, size sm) |

**Столбец «Действие после задачи» (per-robot `after_action`):**
- **Контрол**: inline Select (компактный, без label)
- **Опции**: «Режим ожидания» (value: `idle`, default) / «Маркетинг» (value: `marketing`)
- **Подсказка tooltip**: «Что делает робот после выполнения любой задачи»
- При изменении → Toast: **«Настройка робота обновлена»** (3 сек)

### ДОБАВИТЬ Toast

| #   | Экран | Триггер                  | Текст Title                  | Длительность |
| --- | ----- | ------------------------ | ---------------------------- | ------------ |
| 8   | Э1    | Изменение `after_action` | «Настройка робота обновлена» | 3 сек        |

### ОБНОВИТЬ чеклист Э1

Было:
```
- [ ] Таблица: 6 столбцов (Имя, ID, Регион, Статус, Карта, Действия)
```

Стало:
```
- [ ] Таблица: 6 столбцов (Имя, ID, Статус, Карта, Действие после задачи, Действия)
- [ ] Столбец «Действие после задачи»: inline Select (Режим ожидания / Маркетинг) per-robot
```

---

## C3. Экран Э3 — Маппинг столов: убрать Select робота и столбец «Тип точки»

> **Замечания**: З-06, З-07, З-08, З-09, З-10, З-45
> **Источник**: Руслан (11:21): «Вы транслируете только точки столов»; Олег (13:15): «Пока да» (точки универсальные); Стенограмма (16:34): «Нейминг ваших точек мы точно менять не будем»; Руслан NE (13:32): «На один стол может приходиться несколько точек»; Олег (11:45): «Это просто скорее функционал инженеров»; Кирилл (16:56): «Давайте я сделаю два прототипа»

### УДАЛИТЬ из Э3

1. **Select робота в Subheader** — убрать полностью. Маппинг теперь **универсальный** (один на всё заведение, не per-robot). Точки загружаются с активной карты любого зарегистрированного робота.
2. **Столбец #3 «Тип точки»** (Badge по `point_type`) — убрать полностью. Все точки, передаваемые от NE, являются точками типа «стол». Системные точки (мойка, паркинг, зарядка, pickup) не фигурируют в маппинге.

### ИЗМЕНИТЬ в Э3

**Subheader (обновлённый):**
- H1: **«Маппинг столов»**
- Справа: только кнопка **«Обновить точки»** (ghost, иконка `refresh-cw`, size sm). Select робота убран.

**Обновлённая таблица маппинга:**

| #   | Столбец           | Описание                      | Стилизация                                                                                                          |
| --- | ----------------- | ----------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| 1   | Стол iiko         | Название стола + section_name | `text-sm text-gray-900`, секция `text-xs text-gray-500`                                                             |
| 2   | Привязанные точки | 1–N select'ов с точками       | Каждый select — строка. Кнопка `x` у каждого для удаления. Названия точек read-only — отображаются «как есть» от NE |
| 3   | Статус            | Иконка                        | `check-circle-2 text-green-600` замаплен / `circle text-gray-300` не замаплен                                       |
| 4   | Действия          | Кнопки                        | «+ Точку» (ghost, sm), «Тест» (outline, sm) — кнопка у каждой привязанной точки                                     |

**Удалить бейджи типов точек (таблицу из 5 типов)** — больше не используются в Э3.

**Подсказка для пользователей (добавить перед таблицей):**
```
border-blue-200 bg-blue-50/50 rounded-lg p-4
├── иконка: info, text-blue-500, size=18
└── Текст (text-sm text-gray-700): «Маппинг столов к точкам един для всего заведения и действует для всех зарегистрированных роботов. Названия точек загружены из карты зала робота (NE). Настройка выполняется инженером NE.»
```

**Связь 1:N подтверждена**: один стол iiko может иметь несколько привязанных точек робота. Кнопка «+ Точку» добавляет ещё один select в строку.

**Обновить предупреждения:**

| Условие                 | Стилизация                                                                                  | Текст                                                                                              |
| ----------------------- | ------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| Есть столы без привязки | `border-orange-200 bg-orange-50/50 rounded-lg p-5`, иконка `alert-triangle text-orange-500` | **«{N} столов не имеют привязки к точкам робота. Робот не сможет доставить заказ к этим столам.»** |

**Убрать предупреждение «{N} точек робота не привязаны к столам iiko»** — оно нерелевантно, т.к. все точки = столы, и неиспользованные точки не являются проблемой.

### ОБНОВИТЬ состояния экрана Э3

| Состояние           | UI                                                                                                                |
| ------------------- | ----------------------------------------------------------------------------------------------------------------- |
| **Нет робота**      | Текст по центру `text-gray-400`: **«Зарегистрируйте робота для настройки маппинга»** + ссылка «Перейти к роботам» |
| **Загрузка**        | Спиннер `loader-2` по центру                                                                                      |
| **Нет точек**       | UiAlert (красный): **«На карте робота нет точек. Обратитесь к инженеру NE для настройки карты зала»**             |
| **Точки загружены** | Подсказка (info) + таблица маппинга с `animate-fade-in` + предупреждения, если есть                               |

### ОБНОВИТЬ чеклист Э3

Было:
```
- [ ] Select робота (если > 1)
- [ ] Таблица маппинга: Стол, Точки (select), Тип, Статус, Действия
- [ ] Бейджи типов точек (5 типов с цветами)
```

Стало:
```
- [ ] Маппинг универсальный — без Select робота (один на всё заведение)
- [ ] Таблица маппинга: Стол, Точки (select), Статус, Действия (без столбца «Тип точки»)
- [ ] Подсказка (info-блок): маппинг един для заведения, настройка инженером NE (З-09)
- [ ] Названия точек read-only — как есть от NE
- [ ] 1:N маппинг: несколько точек к одному столу (кнопка «+ Точку»)
- [ ] Два варианта маппинга (З-10): «Столы → Точки» (основной) и «Точки → Столы» (альтернативный)
```

### ДОБАВИТЬ: Альтернативный вариант маппинга «Точки → Столы» (З-10)

> **Замечание**: З-10 — Руслан iiko (14:37): «Там должна быть концепция не столы-точки, а точки-столы»; Руслан NE (17:02): «Это надо будет уже у клиентов спрашивать, как им будет удобнее»; Кирилл (16:56): «Давайте я сделаю два прототипа»

В прототипе необходимо реализовать **переключатель направления маппинга** или **два отдельных режима отображения** для тестирования с клиентами. Окончательное решение будет принято после обратной связи.

**Вариант A (основной, описан выше): Столы → Точки**
- Строки таблицы = столы iiko
- В каждой строке: Select(ы) для привязки точек робота

**Вариант B (альтернативный): Точки → Столы**

| #   | Столбец          | Описание                       | Стилизация                                               |
| --- | ---------------- | ------------------------------ | -------------------------------------------------------- |
| 1   | Точка робота     | Название точки (read-only, NE) | `text-sm text-gray-900`                                  |
| 2   | Привязанный стол | Select со столами iiko         | Select. Опция «Не назначена» (`italic text-gray-400`)    |
| 3   | Статус           | Иконка                         | `check-circle-2 text-green-600` / `circle text-gray-300` |
| 4   | Действия         | Кнопки                         | «Тест» (outline, sm)                                     |

**Переключатель вариантов (добавить в subheader):**
- Кнопки-переключатели (SegmentedControl / Tabs): **«Столы → Точки»** / **«Точки → Столы»**
- По умолчанию: «Столы → Точки»
- При переключении: таблица перестраивается с `animate-fade-in`

> **Примечание**: Направление маппинга — **открытый вопрос НВ-06**. Оба варианта прототипа будут показаны клиентам для принятия решения.

---

## C4. Экран Э4, вкладка 1 — Доставка меню (`send_menu`): новые поля и правки

> **Замечания**: З-12, З-13, З-14, З-15, З-16, З-44
> **Источник**: Документ «IIKO web»; Стенограмма 11.02 (Олег, Руслан NE, Кирилл)

### УДАЛИТЬ из вкладки «Доставка меню»

1. **Поле #3 «Действие после выполнения»** (Select idle/marketing) — удалить. Эта настройка вынесена как per-robot `after_action` на экран Э1 (см. C2).

### ДОБАВИТЬ на вкладку «Доставка меню»

**Обновлённый список полей (вкладка «Доставка меню»):**

| #   | Label                                  | Контрол        | Обязательное | Default                        | Подсказка                                                                                                       | Валидация                  |
| --- | -------------------------------------- | -------------- | ------------ | ------------------------------ | --------------------------------------------------------------------------------------------------------------- | -------------------------- |
| 1   | Фраза робота при доставке              | PhraseInput    | Нет          | «Заберите, пожалуйста, меню»   | «Фраза, которую робот произнесёт у стола. Максимум 180 символов»                                                | max 180 символов           |
| 2   | URL видео/аудио для фразы при доставке | Input (url)    | Нет          | —                              | «Ссылка на mp4-видео или mp3-аудио. Если указано, робот воспроизведёт файл вместо синтезированной речи»         | Валидный URL (http/https)  |
| 3   | Фраза при заборе меню (pickup-точка)   | PhraseInput    | Нет          | «Положите меню для стола №{N}» | «Фраза, которую робот произнесёт на станции выдачи, чтобы официант положил меню. Подстановка {N} — номер стола» | max 180 символов           |
| 4   | URL видео/аудио для фразы при заборе   | Input (url)    | Нет          | —                              | «Ссылка на mp4-видео или mp3-аудио для фразы при заборе меню»                                                   | Валидный URL (http/https)  |
| 5   | Время ожидания у стола (сек)           | Input (number) | Нет          | 30                             | «Сколько секунд робот ожидает у стола»                                                                          | > 0, целое, диапазон 1–600 |
| 6   | Время ожидания на точке выдачи (сек)   | Input (number) | Нет          | 30                             | «Сколько секунд робот ожидает на станции выдачи, пока загрузят меню»                                            | > 0, целое, диапазон 1–600 |

**Разделение на секции:**

Секция 1: **H3 «Фраза у стола»**
- Поле 1 (Фраза при доставке)
- Поле 2 (URL видео/аудио для фразы при доставке)
- Поле 5 (Время ожидания у стола)

Секция 2: **H3 «Фраза на станции выдачи (pickup)»**
- Поле 3 (Фраза при заборе меню)
- Поле 4 (URL видео/аудио для фразы при заборе)
- Поле 6 (Время ожидания на точке выдачи)

### ДОБАВИТЬ: Confirm-диалог при изменении фразы (ограничение 24ч)

> **Замечание**: З-13 — ограничение смены фразы 1 раз в 24 часа из-за платного TTS

При нажатии кнопки «Сохранить», если фраза была изменена (поля 1 или 3):

**Confirm dialog:**
- **Заголовок**: «Ограничение на изменение фразы»
- **Текст**: «Изменить фразу можно **один раз в 24 часа** (конвертация текста в аудио — платная услуга). После сохранения повторное изменение фразы будет доступно через 24 часа. Продолжить?»
- **Кнопки**: **«Сохранить»** (primary) / **«Отмена»** (outline)

**Для прототипа**: после подтверждения — Toast **«Изменения сохранены»**. Блокировку 24ч в прототипе **не реализовывать** (mock без серверного состояния). Добавить визуальный индикатор:
- Под каждым полем фразы, если фраза была изменена менее 24ч назад: `text-xs text-orange-500`: **«Следующее изменение фразы доступно через {HH:MM}»** (в прототипе — static mock «Следующее изменение фразы доступно через 23:45»)

### ДОБАВИТЬ Confirm-диалог в реестр (раздел 8)

| #   | Экран | Триггер                                     | Заголовок                        | Текст                                                    | Кнопки                                             |
| --- | ----- | ------------------------------------------- | -------------------------------- | -------------------------------------------------------- | -------------------------------------------------- |
| 3   | Э4    | Сохранение при изменённой фразе (send_menu) | «Ограничение на изменение фразы» | «Изменить фразу можно один раз в 24 часа... Продолжить?» | **«Сохранить»** (primary) / **«Отмена»** (outline) |

### ОБНОВИТЬ чеклист вкладки 1

Было:
```
- [ ] Вкладка 1: 3 поля (фраза, время, действие после)
```

Стало:
```
- [ ] Вкладка 1: 6 полей в 2 секциях (Фраза у стола: фраза + URL видео + время ожидания; Фраза на pickup: фраза + URL видео + время ожидания)
- [ ] URL-поля для видео/аудио к каждой фразе
- [ ] Confirm-диалог «Ограничение 24ч» при изменении фраз
- [ ] Поле «Действие после выполнения» убрано (перенесено в Э1 per-robot)
```

---

## C5. Экран Э4, вкладка 2 — Доставка блюд (`send_dish`): система фраз с таймерами

> **Замечания**: З-17, З-18, З-19, З-44, З-46, З-48
> **Источник**: Стенограмма 11.02 — Кирилл (26:21): «Итого две фразы. Первая и вторая через таймер»; Руслан (26:25): «Фраза может быть неограничена, главное в тайминг вложиться»; Руслан NE (25:32): «Чем легче будет настраивать, тем проще на текущий момент будет запуск»

### УДАЛИТЬ из вкладки «Доставка блюд»

1. **Поле #6 «Действие после задачи»** (Select idle/marketing) — удалить. Перенесено в Э1 per-robot.
2. **Поля #2, #3, #4** (три отдельных фразы: «Фраза при доставке», «Погружаемая фраза про блюда», «Фраза про поднос для клиента») — **заменить** на систему пар {фраза, таймер}.

### ИЗМЕНИТЬ: новая система фраз с таймерами

**Обновлённый список полей (вкладка «Доставка блюд»):**

| #   | Label                        | Контрол        | Обязательное | Default | Подсказка                                                                          | Валидация                  |
| --- | ---------------------------- | -------------- | ------------ | ------- | ---------------------------------------------------------------------------------- | -------------------------- |
| 1   | Макс. блюд за рейс           | Input (number) | **Да**       | 6       | «Максимальное количество блюд за один рейс (не более 20)»                          | > 0, целое, **<= 20**      |
| 2   | Время ожидания у стола (сек) | Input (number) | Нет          | 45      | «Общее время ожидания робота у стола. Сумма таймеров фраз не должна его превышать» | > 0, целое, диапазон 1–600 |
| 3   | Список фраз                  | Компонент      | Нет          | 2 фразы | См. ниже                                                                           | См. ниже                   |

**Компонент «Список фраз» (динамический список пар {фраза, таймер}):**

Визуальная структура каждого элемента списка:

```
┌────────────────────────────────────────────────────────────────────┐
│ Фраза №{i}                                           [Удалить ×] │
│ ┌──────────────────────────────────────────────────┐              │
│ │ Input (text): Текст фразы                        │ 45 / 180    │
│ └──────────────────────────────────────────────────┘              │
│ ┌──────────────────────────────────────────────────┐              │
│ │ Input (url): URL видео/аудио (необязательно)     │              │
│ └──────────────────────────────────────────────────┘              │
│ ┌────────────┐                                                    │
│ │ Input (num)│ Задержка перед фразой (сек)                        │
│ └────────────┘                                                    │
│ text-xs text-gray-400: «Пауза перед произнесением этой фразы»    │
└────────────────────────────────────────────────────────────────────┘
```

- **Фраза**: PhraseInput, max 180 символов, счётчик «N / 180»
- **URL видео/аудио**: Input (url), необязательное. Подсказка: «Ссылка на mp4/mp3. Если указано — используется вместо синтезированной речи»
- **Задержка (сек)**: Input (number), default 0 для первой фразы, 10 для остальных. Подсказка: «Пауза перед произнесением этой фразы (после завершения предыдущей)»
- Кнопка **«Удалить»** (`x`, ghost, sm, text-gray-400) — у каждой фразы, кроме первой (минимум 1 фраза)

**Кнопка под списком:**
- **«+ Добавить фразу»** (ghost, иконка `plus`, size sm)
- При клике: добавляется новый элемент с пустой фразой и задержкой 10 сек

**Mock по умолчанию (2 фразы):**

```typescript
const defaultPhrases = [
  { text: "Ваш заказ прибыл! Приятного аппетита!", url: "", delay_sec: 0 },
  { text: "Пожалуйста, заберите блюда с подноса", url: "", delay_sec: 15 }
];
```

**Валидация таймеров:**
- Правило: сумма всех `delay_sec` + расчётное время произнесения всех фраз **не должна превышать** значение поля «Время ожидания у стола».
- Расчёт времени произнесения: **~0.06 сек на символ** (приблизительно).
- При нарушении: под списком фраз — `text-sm text-red-600`: **«Суммарное время фраз ({X} сек) превышает время ожидания у стола ({Y} сек). Уменьшите количество фраз или увеличьте время ожидания.»**
- Фраза **не обрубается**: завершение произношения текущей фразы → пауза (delay следующей) → следующая фраза.

**Визуальная индикация прогресса (информативная):**
- Под полем «Время ожидания у стола»: прогресс-бар или текст `text-xs text-gray-500`: **«Использовано: {X} сек из {Y} сек ({Z}%)»**

> **Примечание (З-46)**: Персонализация фраз под конкретные блюда (per-dish фразы) **не включена** в MVP. Зарезервировано для будущих версий. Текущая система фраз — единая для всех доставок.

### ОБНОВИТЬ чеклист вкладки 2

Было:
```
- [ ] Вкладка 2: 6 полей (макс. блюд, 3 фразы, время, действие)
```

Стало:
```
- [ ] Вкладка 2: 2 поля + динамический список фраз с таймерами
- [ ] Поле «Макс. блюд за рейс» (число, 1–20)
- [ ] Поле «Время ожидания у стола» (число, сек)
- [ ] Список фраз: пары {текст фразы, URL видео/аудио, задержка сек}. Кнопка «+ Добавить фразу»
- [ ] Валидация: сумма таймеров + время произнесения <= время ожидания
- [ ] Визуальная индикация «Использовано: X из Y сек»
- [ ] Поле «Действие после задачи» убрано (перенесено в Э1 per-robot)
```

---

## C6. Экран Э4, вкладка 3 — Уборка посуды (`cleanup`): Radio Group 3 варианта

> **Замечания**: З-20, З-21, З-22
> **Источник**: Документ «IIKO web»: «Переключатель, может сделать радио баттон с тремя вариантами: Ручной, автоматический и смешанный. Так же под каждым вариантом добавить описание»; «Убрать автоматический режим когда выбирают авто»

### УДАЛИТЬ из вкладки «Уборка посуды»

1. **Toggle / Switch**: переключатель «Ручной / Авто» удаляется.

### ИЗМЕНИТЬ: Radio Group с 3 вариантами

**Переключатель режима (вверху вкладки):**

Заменить Toggle на **Radio Group** с 3 вариантами. Каждый вариант имеет подпись-описание:

```
┌──────────────────────────────────────────────────────────────────┐
│ ● Ручной режим                                                   │
│   text-xs text-gray-500: «Официант вручную отправляет робота     │
│   для уборки конкретного стола через iikoFront»                  │
├──────────────────────────────────────────────────────────────────┤
│ ○ Автоматический режим                                           │
│   text-xs text-gray-500: «Робот автоматически отправляется       │
│   на уборку по таймерам: после доставки блюда или закрытия чека» │
├──────────────────────────────────────────────────────────────────┤
│ ○ Смешанный режим                                                │
│   text-xs text-gray-500: «Автоматическая уборка по таймерам      │
│   с возможностью ручного запуска через iikoFront»                │
└──────────────────────────────────────────────────────────────────┘
```

- Стилизация: стандартный RadioGroup из shadcn/ui
- Каждый radio-item: `space-y-1` (label + описание)
- Label: `text-sm font-medium text-gray-900`
- Описание: `text-xs text-gray-500`, отступ как у label (выровнен под текстом)
- Разделитель `border-b border-gray-100` между вариантами

**Условная видимость секций настроек:**

| Режим          | Секция «Ручной» (фраза, время, фраза «позже») | Секция «Авто» (таймеры) |
| -------------- | --------------------------------------------- | ----------------------- |
| Ручной         | Видна                                         | Скрыта                  |
| Автоматический | Скрыта, но **наследуется** (подсказка)        | Видна                   |
| Смешанный      | Видна                                         | Видна                   |

**При выборе «Автоматический»:**
- Секция ручного режима — скрыта, но добавить подсказку `text-xs text-orange-500 italic`:
  **«Фраза и время ожидания наследуются из ручного режима. Для изменения переключитесь в "Смешанный" режим.»**
- Секция «Авто» отображается как основная.

**Общие поля (секция «Ручной режим»):**

| #   | Label                        | Контрол        | Default | Подсказка                                                           | Валидация |
| --- | ---------------------------- | -------------- | ------- | ------------------------------------------------------------------- | --------- |
| 1   | Фраза при подъезде к столу   | PhraseInput    | —       | «Фраза робота при прибытии к столу для уборки. Макс. 180 символов»  | max 180   |
| 2   | URL видео/аудио              | Input (url)    | —       | «Ссылка на mp4/mp3 для фразы при уборке»                            | URL       |
| 3   | Время ожидания у стола (сек) | Input (number) | 60      | «Сколько секунд робот ожидает, пока гость положит посуду»           | > 0       |
| 4   | Фраза «приеду позже»         | PhraseInput    | —       | «Фраза, если гость не положил посуду по истечении времени ожидания» | max 180   |
| 5   | URL видео/аудио              | Input (url)    | —       | «Ссылка на mp4/mp3 для фразы "приеду позже"»                        | URL       |

**Поля секции «Автоматический режим» (появляются с `animate-fade-in`):**

Секция с H3: **«Автоматический режим»**, `space-y-4`

| #   | Label                             | Контрол        | Default | Подсказка                                                                     | Валидация    |
| --- | --------------------------------- | -------------- | ------- | ----------------------------------------------------------------------------- | ------------ |
| 6   | Таймер после доставки блюда (мин) | Input (number) | **12**  | «Через сколько минут после доставки блюда робот приедет для уборки»           | > 0, минуты  |
| 7   | Таймер после закрытия чека (мин)  | Input (number) | —       | «Через сколько минут после закрытия чека робот приедет для уборки. 0 — сразу» | >= 0, минуты |

Под полем 6: подсказка *курсивом* `italic text-xs text-gray-400`: **«Рекомендуемое: 12–14 мин»**

### ОБНОВИТЬ чеклист вкладки 3

Было:
```
- [ ] Вкладка 3: Toggle ручной/авто + 3-5 полей + секция «Автоматический режим»
```

Стало:
```
- [ ] Вкладка 3: Radio Group (3 варианта: Ручной / Автоматический / Смешанный) с описаниями
- [ ] При «Ручной» — секция ручного (фразы + URL видео + время ожидания)
- [ ] При «Авто» — подсказка о наследовании фраз + секция авто-таймеров
- [ ] При «Смешанный» — обе секции видны
- [ ] URL-поля видео/аудио к фразам уборки
```

---

## C7. Экран Э4, вкладка 4 — Оплата по QR (`qr_payment`): убрать `after_action`, подтвердить значения

> **Замечания**: З-23, З-24 (примечание), З-25, З-26 (примечание), З-27
> **Источник**: Документ «IIKO web»: «Убрать "Действия после выполнения"»; Стенограмма: Руслан NE (31:18): «по умолчанию 120 секунд»; Руслан (30:45): «Давайте лучше iikoFront чтобы было»; Кирилл (32:01): «Ссылка на QR, та, которая у нас бы напечаталась на фискальном чеке»

### УДАЛИТЬ из вкладки «Оплата по QR»

1. **Поле #6 «Действие после задачи»** (Select idle/marketing) — удалить. Перенесено в Э1 per-robot.

### ИЗМЕНИТЬ

**Обновлённый список полей вкладки «Оплата по QR»:**

**Секция 1: H3 «Фаза: Кассир»**

| #   | Label                             | Контрол     | Default                    | Подсказка                                                                        | Валидация |
| --- | --------------------------------- | ----------- | -------------------------- | -------------------------------------------------------------------------------- | --------- |
| 1   | Фраза у кассира                   | PhraseInput | «Положите чек для стола N» | «Фраза робота при прибытии к кассиру для получения чека. Макс. 180 символов»     | max 180   |
| 2   | URL видео/аудио                   | Input (url) | —                          | «Ссылка на mp4/mp3 для фразы у кассира»                                          | URL       |
| 3   | Тайм-аут ожидания у кассира (сек) | Input (num) | 30                         | «Сколько секунд робот ожидает укладки чека. По истечении робот уезжает без чека» | > 0       |

**Секция 2: H3 «Фаза: Гость»**

| #   | Label                       | Контрол     | Default                                                 | Подсказка                                                                 | Валидация |
| --- | --------------------------- | ----------- | ------------------------------------------------------- | ------------------------------------------------------------------------- | --------- |
| 4   | Время ожидания оплаты (сек) | Input (num) | **120**                                                 | «Сколько секунд робот ожидает оплату у стола гостя. По умолчанию 120 сек» | > 0       |
| 5   | Фраза при успешной оплате   | PhraseInput | «Спасибо за оплату!»                                    | «Фраза робота после подтверждения оплаты»                                 | max 180   |
| 6   | URL видео/аудио (успех)     | Input (url) | —                                                       | «Ссылка на mp4/mp3 для фразы при успешной оплате»                         | URL       |
| 7   | Фраза при неуспешной оплате | PhraseInput | «К сожалению, оплата не прошла. Обратитесь к официанту» | «Фраза робота, если оплата не прошла или истёк тайм-аут ожидания»         | max 180   |
| 8   | URL видео/аудио (неуспех)   | Input (url) | —                                                       | «Ссылка на mp4/mp3 для фразы при неуспешной оплате»                       | URL       |

> **Примечание**: Чаевые **не включены** в текущий scope (З-27). Не добавлять сценарий чаевых.

> **Примечание (З-24)**: Взаимодействие кассира с роботом (кнопка «Далее» / Next) происходит **только через iikoFront**. На экране робота — пассивное отображение QR-кода и информации. У робота нет интерактивного экрана. Это runtime-поведение, не влияет на UI Admin Panel, но зафиксировано для полноты.

> **Примечание (З-26)**: Формат QR: iiko передаёт URL-ссылку (ту же, что печатается на фискальном чеке — СБП или другой платёжный сервис). NE получает URL и выводит QR-код на экране робота. В Admin Panel настройка формата QR не требуется.

### ОБНОВИТЬ чеклист вкладки 4

Было:
```
- [ ] Вкладка 4: 2 секции (Кассир + Гость) с H3
```

Стало:
```
- [ ] Вкладка 4: 2 секции (Кассир + Гость) с H3
- [ ] Поле «Действие после задачи» убрано (перенесено в Э1 per-robot)
- [ ] URL-поля видео/аудио к каждой фразе (кассир, успех, неуспех)
- [ ] Время ожидания оплаты: default 120 сек
- [ ] Чаевые — не в scope
```

---

## C8. Экран Э4, вкладка 6 — Общие: убрать из MVP

> **Замечание**: З-31
> **Источник**: Документ «IIKO web»: «Пока данная настройка не требуется»

### УДАЛИТЬ

1. **Вкладка 6 «Общие»** — убрать полностью из вкладок настроек.

### ИЗМЕНИТЬ

Количество вкладок: **5** (было 6):
1. Доставка меню
2. Доставка блюд
3. Уборка посуды
4. Оплата по QR
5. Маркетинг

**Вкладка «Маркетинг»** — без изменений (всё хорошо, З-28, З-29, З-30, З-47). Подтверждены:
- Select конкретного робота для маркетинга
- PuduLink для загрузки медиа (warning-блок остаётся)
- Расписание MVP — только время начала/окончания, без привязки к дням недели

### ОБНОВИТЬ чеклист

Было:
```
- [ ] 6 вкладок: Доставка меню, Доставка блюд, Уборка посуды, Оплата по QR, Маркетинг, Общие
- [ ] Вкладка 6: Select робота по умолчанию
```

Стало:
```
- [ ] 5 вкладок: Доставка меню, Доставка блюд, Уборка посуды, Оплата по QR, Маркетинг
- [ ] Вкладка «Общие» убрана из MVP (зарезервирована для будущего)
```

---

## C9. Mock-данные: обновление

### ИЗМЕНИТЬ интерфейс Robot

**Удалить** поля `server_region` и `secret_key`. **Добавить** поле `after_action`:

```typescript
// Робот PUDU (v1.2)
interface Robot {
  id: string;                    // "PD2024060001"
  name: string;                  // "BellaBot-01"
  connection_status: "online" | "offline" | "error";
  active_map_name: string;       // "Зал 1 этаж"
  after_action: "idle" | "marketing";  // Действие после выполнения задачи (per-robot)
}
```

### ИЗМЕНИТЬ интерфейс RobotPoint

**Удалить** `point_type` — все точки являются точками столов:

```typescript
// Точка на карте робота (v1.2)
interface RobotPoint {
  point_id: string;              // "pt-001"
  point_name: string;            // "Стол у окна" (read-only, как есть от NE)
}
```

### ДОБАВИТЬ интерфейс PhraseWithTimer

```typescript
// Фраза с таймером (для send_dish)
interface PhraseWithTimer {
  text: string;                  // Текст фразы, max 180 символов
  url?: string;                  // URL видео/аудио (mp4/mp3)
  delay_sec: number;             // Задержка перед фразой (сек), 0 для первой
}
```

### ИЗМЕНИТЬ интерфейс ScenarioSettings

```typescript
// Настройки сценариев (v1.2)
interface ScenarioSettings {
  send_menu: {
    phrase: string;                  // max 180 символов
    phrase_url?: string;             // URL видео/аудио
    phrase_pickup: string;           // Фраза при заборе меню, max 180
    phrase_pickup_url?: string;      // URL видео/аудио для pickup
    wait_time: number;               // секунды (у стола)
    wait_time_pickup: number;        // секунды (на точке выдачи)
  };
  send_dish: {
    max_dishes_per_trip: number;     // 1–20
    wait_time: number;               // секунды (общее время у стола)
    phrases: PhraseWithTimer[];      // Динамический список пар {текст, url, задержка}
  };
  cleanup: {
    mode: "manual" | "auto" | "mixed";  // Ручной / Авто / Смешанный
    phrase_arrival: string;          // max 180
    phrase_arrival_url?: string;     // URL видео/аудио
    wait_time: number;               // секунды
    phrase_later: string;            // max 180
    phrase_later_url?: string;       // URL видео/аудио
    auto_timer_after_delivery: number; // минуты (default 12)
    auto_timer_after_check: number;    // минуты
  };
  qr_payment: {
    cashier_phrase: string;          // max 180
    cashier_phrase_url?: string;     // URL видео/аудио
    cashier_timeout: number;         // секунды
    guest_wait_time: number;         // секунды (default 120)
    phrase_success: string;          // max 180
    phrase_success_url?: string;     // URL видео/аудио
    phrase_failure: string;          // max 180
    phrase_failure_url?: string;     // URL видео/аудио
  };
  marketing: {
    robot_id: string;
    auto_cruise_on_idle: boolean;
    timer_enabled: boolean;
    timer_start: string;             // "HH:MM"
    timer_end: string;               // "HH:MM"
  };
  // general — УДАЛЕНА из MVP
}
```

### ИЗМЕНИТЬ mock-данные роботов

```typescript
const mockRobots: Robot[] = [
  {
    id: "PD2024060001",
    name: "BellaBot-01",
    connection_status: "online",
    active_map_name: "Зал 1 этаж",
    after_action: "idle"
  },
  {
    id: "PD2024080042",
    name: "Ketty-02",
    connection_status: "offline",
    active_map_name: "Зал 2 этаж",
    after_action: "idle"
  },
  {
    id: "PD2025010007",
    name: "BellaBot-03",
    connection_status: "online",
    active_map_name: "Зал VIP",
    after_action: "marketing"
  }
];
```

### ИЗМЕНИТЬ mock-данные точек

**Убрать** системные точки (pickup, sink, parking, charging). Оставить **только столы**:

```typescript
const mockPoints: RobotPoint[] = [
  { point_id: "pt-001", point_name: "Стол у окна" },
  { point_id: "pt-002", point_name: "Стол 2" },
  { point_id: "pt-003", point_name: "Стол 3 (VIP)" },
  { point_id: "pt-004", point_name: "Стол 4 (бар)" },
  { point_id: "pt-005", point_name: "Стол 5" },
  { point_id: "pt-006", point_name: "Стол 6 (терраса)" }
];
```

> **Примечание**: точки привязаны ко всему заведению, а не к конкретному роботу. Массив `mockPoints` — единый для всех.

### ИЗМЕНИТЬ mock-данные настроек

```typescript
const mockSettings: ScenarioSettings = {
  send_menu: {
    phrase: "Заберите, пожалуйста, меню",
    phrase_url: "",
    phrase_pickup: "Положите меню для стола №{N}",
    phrase_pickup_url: "",
    wait_time: 30,
    wait_time_pickup: 30
  },
  send_dish: {
    max_dishes_per_trip: 6,
    wait_time: 45,
    phrases: [
      { text: "Ваш заказ прибыл! Приятного аппетита!", url: "", delay_sec: 0 },
      { text: "Пожалуйста, заберите блюда с подноса", url: "", delay_sec: 15 }
    ]
  },
  cleanup: {
    mode: "manual",
    phrase_arrival: "Пожалуйста, поставьте грязную посуду на поднос",
    phrase_arrival_url: "",
    wait_time: 90,
    phrase_later: "Я приеду позже за посудой",
    phrase_later_url: "",
    auto_timer_after_delivery: 12,
    auto_timer_after_check: 3
  },
  qr_payment: {
    cashier_phrase: "Положите чек для стола N",
    cashier_phrase_url: "",
    cashier_timeout: 30,
    guest_wait_time: 120,
    phrase_success: "Спасибо за оплату!",
    phrase_success_url: "",
    phrase_failure: "К сожалению, оплата не прошла. Обратитесь к официанту",
    phrase_failure_url: ""
  },
  marketing: {
    robot_id: "PD2024060001",
    auto_cruise_on_idle: false,
    timer_enabled: false,
    timer_start: "11:00",
    timer_end: "14:00"
  }
};
```

### ИЗМЕНИТЬ mock-данные маппинга

Убрать ссылки на pickup-точки в маппинге (все точки = столы):

```typescript
const mockMapping: TableMapping[] = [
  { table_id: "tbl-001", points: [mockPoints[0]] },                        // Стол №1 → Стол у окна
  { table_id: "tbl-002", points: [mockPoints[1]] },                        // Стол №2 → Стол 2
  { table_id: "tbl-003", points: [mockPoints[2]] },                        // Стол №3 (VIP) → Стол 3 (VIP)
  { table_id: "tbl-004", points: [mockPoints[3]] },                        // Стол №4 (бар) → Стол 4 (бар)
  { table_id: "tbl-005", points: [] },                                      // Стол №5 → НЕ ЗАМАПЛЕН
  { table_id: "tbl-006", points: [mockPoints[4], mockPoints[5]] },          // Стол №6 (терраса) → Стол 5 + Стол 6 (терраса) (1:N)
  { table_id: "tbl-007", points: [] },                                      // Стол №7 → НЕ ЗАМАПЛЕН
  { table_id: "tbl-008", points: [] }                                       // Стол №8 → НЕ ЗАМАПЛЕН
];
```

---

## C10. Файловая структура: обновление

### ИЗМЕНИТЬ

```
components/
├── settings/
│   ├── settings-tabs.tsx
│   ├── tab-send-menu.tsx
│   ├── tab-send-dish.tsx
│   ├── tab-cleanup.tsx
│   ├── tab-qr-payment.tsx
│   ├── tab-marketing.tsx
│   └── tab-general.tsx          // ← УДАЛИТЬ (вкладка убрана из MVP)
├── shared/
│   ├── phrase-input.tsx         // Input с счётчиком символов (max 180) — без изменений
│   ├── phrase-list.tsx          // НОВЫЙ: динамический список пар {фраза, url, таймер} для send_dish
│   ├── url-input.tsx            // НОВЫЙ: Input для URL видео/аудио с валидацией
│   ├── confirm-dialog.tsx
│   └── status-badge.tsx
```

---

## Сводная таблица изменений

| #   | Экран / Компонент  | Изменение                                                                                                                    | Замечания                          | Тип                   |
| --- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------- | ---------------------------------- | --------------------- |
| C1  | Э2 Регистрация     | Убрать «Регион сервера» и «Секретный ключ». Оставить 2 поля: ID + Имя (авто от NE)                                           | З-01, З-02, З-03                   | Удаление + Изменение  |
| C2  | Э1 Таблица роботов | Убрать столбец «Регион». Добавить столбец «Действие после задачи» (per-robot Select). Ошибка «не в системе» на уровне Э2     | З-01, З-05, З-32, З-43             | Удаление + Добавление |
| C3  | Э3 Маппинг         | Убрать Select робота (маппинг универсальный). Убрать столбец «Тип точки». Info-подсказка (инженер NE). Два варианта маппинга | З-06, З-07, З-08, З-09, З-10, З-45 | Удаление + Добавление |
| C4  | Э4 Доставка меню   | Убрать `after_action`. Добавить URL видео к фразам. Добавить фразу pickup + время pickup. Confirm 24ч                        | З-12, З-13, З-14, З-15, З-16, З-44 | Удаление + Добавление |
| C5  | Э4 Доставка блюд   | Убрать `after_action`. Новая система фраз: пары {фраза, url, таймер}. Валидация. Per-dish не в MVP                           | З-17, З-18, З-19, З-44, З-46, З-48 | Удаление + Изменение  |
| C6  | Э4 Уборка          | Toggle → Radio Group (3 варианта). Описания режимов. Наследование фраз. URL видео к фразам                                   | З-20, З-21, З-22                   | Изменение             |
| C7  | Э4 Оплата QR       | Убрать `after_action`. URL видео. Default 120с. Чаевые не в scope. Кнопка только в iikoFront                                 | З-23, З-24, З-25, З-26, З-27       | Удаление + Добавление |
| C8  | Э4 Общие           | Убрать вкладку из MVP                                                                                                        | З-31                               | Удаление              |
| C9  | Mock-данные        | Убрать region/secret_key из Robot. Добавить after_action. Убрать point_type. Обновить settings                               | —                                  | Изменение             |
| C10 | Файловая структура | Убрать tab-general.tsx. Добавить phrase-list.tsx, url-input.tsx                                                              | —                                  | Изменение             |

---

## Обновлённый итоговый чеклист прототипа (полный, v1.2)

### Layout и навигация
- [ ] Header: логотип iiko + профиль «Администратор»
- [ ] Sidebar: 3 пункта (Роботы PUDU, Маппинг столов, Настройки роботов)
- [ ] Sidebar: активный пункт — `bg-blue-50 text-blue-700`
- [ ] Footer sidebar: «© 2026 iiko / ver: 9.6.1.240000»
- [ ] Subheader с H1 и кнопками на каждой странице
- [ ] Навигация между страницами через sidebar

### Экран Э1: Список роботов
- [ ] Таблица: 6 столбцов (Имя, ID, Статус, Карта, Действие после задачи, Действия)
- [ ] Столбец «Действие после задачи»: inline Select (Режим ожидания / Маркетинг) per-robot
- [ ] Бейджи статусов: online (зелёный), offline (серый), ошибка (оранжевый)
- [ ] Кнопка «Добавить робота» → открывает модалку Э2
- [ ] Кнопка «Удалить» → Confirm dialog → Toast
- [ ] 3 mock-робота в таблице
- [ ] Пустое / Загрузка / Ошибка состояния

### Экран Э2: Регистрация робота
- [ ] Модальное окно с 2 полями (ID, Имя)
- [ ] Имя робота автозаполняется при регистрации (от NE), редактируемое
- [ ] Валидация обязательного поля ID (звёздочка, border-red)
- [ ] Состояния: начальное, заполнение, отправка, успех, ошибки
- [ ] Имитация ошибок (PD000ERROR → не найден, дубликат ID)
- [ ] Toast при успехе, Alert при ошибке

### Экран Э3: Маппинг столов
- [ ] Маппинг универсальный — без Select робота (один на всё заведение)
- [ ] Таблица маппинга: Стол, Точки (select), Статус, Действия (без столбца «Тип точки»)
- [ ] Подсказка (info-блок): маппинг един для заведения, настройка инженером NE
- [ ] Названия точек read-only — как есть от NE
- [ ] 1:N маппинг: несколько точек к одному столу (кнопка «+ Точку»)
- [ ] **Два варианта маппинга** (З-10): переключатель «Столы → Точки» / «Точки → Столы»
- [ ] Warning-блок (столы без привязки)
- [ ] Кнопка «Тест» у каждой привязанной точки — имитация тестовой команды
- [ ] Кнопка «Обновить точки» → спиннер → Toast
- [ ] Sticky footer: «Сохранить» / «Сбросить»
- [ ] 8 mock-столов (5 замаплены, 3 нет), 6 точек (только столы)

### Экран Э4: Настройки сценариев
- [ ] 5 вкладок: Доставка меню, Доставка блюд, Уборка посуды, Оплата по QR, Маркетинг
- [ ] Вкладка «Общие» убрана из MVP
- [ ] Вкладка 1 (Доставка меню): 6 полей в 2 секциях + URL видео/аудио + Confirm 24ч при изменении фразы
- [ ] Вкладка 2 (Доставка блюд): поле «Макс. блюд» + «Время ожидания» + динамический список фраз {текст, url, таймер}
- [ ] Валидация таймеров: сумма <= время ожидания
- [ ] Вкладка 3 (Уборка): Radio Group (Ручной / Авто / Смешанный) с описаниями + условная видимость секций + URL видео
- [ ] Вкладка 4 (QR): 2 секции (Кассир + Гость), default 120 сек, URL видео к фразам, без after_action
- [ ] Вкладка 5 (Маркетинг): без изменений (warning PuduLink, Select робота, таймер)
- [ ] Счётчики символов «N / 180» на всех полях фраз
- [ ] Валидация числовых полей (> 0, <= 20 для блюд)
- [ ] Sticky footer: «Сохранить» / «Сбросить»
- [ ] Confirm при смене вкладки с несохранёнными

### Общее
- [ ] Все тексты на русском
- [ ] Toast-уведомления (8 типов, +1 для after_action)
- [ ] Confirm-диалоги (3 типа, +1 для ограничения фразы 24ч)
- [ ] Анимации: fade-in, slide-up, spin
- [ ] Accessibility: aria-labels, role, keyboard navigation
- [ ] Responsive layout
- [ ] Mock-данные: без region/secret_key, без point_type, с after_action per-robot
- [ ] Все инпуты с подсказками `text-xs text-gray-400`
- [ ] URL-поля видео/аудио к каждой фразе робота

---

## История изменений

| Версия | Дата       | Автор        | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| ------ | ---------- | ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1.0    | 2026-02-11 | Кирилл Тюрин | Первичная версия промта (задача Б7 из Плана работ)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 1.1    | 2026-02-11 | Кирилл Тюрин | Верификация Б7.4: типографика, токены цветов, spacing, валидация, кнопка «Тест» per-point                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 1.2    | 2026-02-13 | Кирилл Тюрин | **Промт-патч по итогам встречи 11.02**: Э2 — убраны «Регион» и «Секретный ключ» (З-01, З-02), имя авто от NE (З-03); Э1 — убран столбец «Регион», обработка ошибки «не в системе» (З-05), добавлен per-robot `after_action` (З-32, З-43); Э3 — убраны Select робота и столбец «Тип точки», маппинг универсальный (З-06, З-07), подсказка инженер NE (З-09), два варианта маппинга (З-10); Э4 — убраны все `after_action` из сценариев; добавлены URL видео/аудио к фразам (З-12); Confirm 24ч на фразы (З-13); фраза pickup + время pickup для send_menu (З-15, З-16); система фраз с таймерами для send_dish (З-18, З-19), per-dish не в MVP (З-46); Radio Group 3 режима уборки (З-20, З-21, З-22); QR — кнопка только в iikoFront (З-24), формат URL (З-26); убрана вкладка «Общие» (З-31); обновлены mock-данные и интерфейсы |
